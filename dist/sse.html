<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SSE Connection Test</title>
</head>
<body>
<script src="photoniq-eds-ws.js"></script>
<script>

    let globalListener = function(event) {
        if (event.type === "open") {
            console.log('EDS connection established: ', event);
        } else if (event.type === "connection-id") {
            console.log("EDS assigned connection's ID: " + event.data);
        } else if (event.type === "server-global-error") {
            console.log(`EDS replied with an Error: `, event);
        }else if (event.type === "server-query-error") {
            console.log(`EDS replied with an Error for query '${event.query}': `, event);
        } else if (event.type === "client-global-error") {
            console.log(`Client global error: `, event);
        } else if (event.type === "client-query-error") {
            console.log(`Client error for query '${event.query}': `, event);
        } else if (event.type === "close") {
            console.log('EDS connection closed: ', event);
        } else if (event.type === "message") {
            console.log('Message: ', event);
        }
    };

    let connection = PhotoniqEdsWs.connect({
    host: "eds32-us-west.eng.macrometa.io",
    customerId: "cust-edsgdn",
    apiKey: "ptq_21mYB1MFWrd_2bfw3CseStzVZtLKCyFWo2TqrJDUrTuFs",
    fabric: "_system",
    primaryConnection: "sse",    
    }, globalListener);
    
    //let qs = connection.querySet();

    
    /*qs.retrieve("SELECT linescore FROM game_live WHERE _key='0012307019'", (event) => {
        console.log(`Linescore event: `, event);
    })*/
    


</script>
</body>
</html>